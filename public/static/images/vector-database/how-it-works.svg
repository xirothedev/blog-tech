<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Vector Database hoạt động như thế nào?
  </text>
  
  <!-- Step 1: Input Data -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="200" height="120" rx="10" fill="#3498db" fill-opacity="0.2" stroke="#3498db" stroke-width="2"/>
    <text x="100" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2980b9">
      Bước 1: Input Data
    </text>
    <text x="100" y="60" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
      Văn bản, hình ảnh,
    </text>
    <text x="100" y="80" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
      âm thanh...
    </text>
    
    <!-- Example data -->
    <rect x="20" y="90" width="160" height="20" rx="5" fill="#ecf0f1"/>
    <text x="100" y="105" font-family="Courier, monospace" font-size="11" text-anchor="middle" fill="#2c3e50">
      "Xe hơi màu đỏ"
    </text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M 270 160 L 310 160" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrow1)"/>
  <defs>
    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c"/>
    </marker>
  </defs>
  
  <!-- Step 2: Embedding Model -->
  <g transform="translate(330, 100)">
    <rect x="0" y="0" width="200" height="120" rx="10" fill="#9b59b6" fill-opacity="0.2" stroke="#9b59b6" stroke-width="2"/>
    <text x="100" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#8e44ad">
      Bước 2: Embedding Model
    </text>
    <text x="100" y="60" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
      Transformer, CNN,
    </text>
    <text x="100" y="80" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
      BERT, GPT...
    </text>
    
    <!-- Vector representation -->
    <rect x="20" y="90" width="160" height="20" rx="5" fill="#ecf0f1"/>
    <text x="100" y="105" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#2c3e50">
      [0.23, -0.45, 0.67...]
    </text>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M 550 160 L 590 160" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrow2)"/>
  <defs>
    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c"/>
    </marker>
  </defs>
  
  <!-- Step 3: Store in Vector DB -->
  <g transform="translate(610, 100)">
    <rect x="0" y="0" width="240" height="120" rx="10" fill="#27ae60" fill-opacity="0.2" stroke="#27ae60" stroke-width="2"/>
    <text x="120" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#229954">
      Bước 3: Lưu vào Vector DB
    </text>
    <text x="120" y="60" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
      Pinecone, Weaviate,
    </text>
    <text x="120" y="80" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
      Milvus, Qdrant...
    </text>
    
    <!-- Index structure -->
    <rect x="20" y="90" width="200" height="20" rx="5" fill="#ecf0f1"/>
    <text x="120" y="105" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#2c3e50">
      Indexed với HNSW/IVF
    </text>
  </g>
  
  <!-- Search Section -->
  <rect x="80" y="280" width="750" height="380" rx="10" fill="#ffffff" stroke="#34495e" stroke-width="2"/>
  <text x="450" y="320" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Quá trình Tìm kiếm (Similarity Search)
  </text>
  
  <!-- Query Input -->
  <g transform="translate(150, 360)">
    <rect x="0" y="0" width="180" height="80" rx="10" fill="#e74c3c" fill-opacity="0.1" stroke="#e74c3c" stroke-width="2"/>
    <text x="90" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#c0392b">
      Query: "Xe ô tô"
    </text>
    <rect x="20" y="40" width="140" height="30" rx="5" fill="#ecf0f1"/>
    <text x="90" y="60" font-family="Courier, monospace" font-size="10" text-anchor="middle" fill="#2c3e50">
      Vector: [0.25, -0.42...]
    </text>
  </g>
  
  <!-- Vector Database -->
  <g transform="translate(380, 340)">
    <rect x="0" y="0" width="200" height="120" rx="10" fill="#3498db" fill-opacity="0.2" stroke="#3498db" stroke-width="2"/>
    <text x="100" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2980b9">
      Vector Database
    </text>
    
    <!-- Vector examples -->
    <circle cx="40" cy="55" r="8" fill="#27ae60"/>
    <text x="55" y="60" font-family="Arial, sans-serif" font-size="11" fill="#34495e">Doc1: [0.23, -0.45...]</text>
    
    <circle cx="40" cy="75" r="8" fill="#f39c12"/>
    <text x="55" y="80" font-family="Arial, sans-serif" font-size="11" fill="#34495e">Doc2: [0.31, -0.38...]</text>
    
    <circle cx="40" cy="95" r="8" fill="#e74c3c"/>
    <text x="55" y="100" font-family="Arial, sans-serif" font-size="11" fill="#34495e">Doc3: [0.15, -0.52...]</text>
    
    <text x="100" y="115" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#7f8c8d">
      ... và hàng triệu vectors khác
    </text>
  </g>
  
  <!-- Similarity Calculation -->
  <g transform="translate(630, 360)">
    <rect x="0" y="0" width="170" height="80" rx="10" fill="#9b59b6" fill-opacity="0.1" stroke="#9b59b6" stroke-width="2"/>
    <text x="85" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#8e44ad">
      Tính Similarity
    </text>
    <text x="85" y="50" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#34495e">
      Cosine, Euclidean,
    </text>
    <text x="85" y="70" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#34495e">
      Dot Product
    </text>
  </g>
  
  <!-- Results -->
  <g transform="translate(150, 500)">
    <rect x="0" y="0" width="600" height="140" rx="10" fill="#27ae60" fill-opacity="0.1" stroke="#27ae60" stroke-width="2"/>
    <text x="300" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#229954">
      Kết quả tìm kiếm (Top K nearest neighbors)
    </text>
    
    <!-- Result items -->
    <rect x="30" y="50" width="540" height="25" rx="5" fill="#ffffff" stroke="#27ae60" stroke-width="1"/>
    <text x="50" y="67" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      1. "Xe hơi màu đỏ" - Similarity: 0.95
    </text>
    
    <rect x="30" y="80" width="540" height="25" rx="5" fill="#ffffff" stroke="#27ae60" stroke-width="1"/>
    <text x="50" y="97" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      2. "Ô tô thể thao" - Similarity: 0.87
    </text>
    
    <rect x="30" y="110" width="540" height="25" rx="5" fill="#ffffff" stroke="#27ae60" stroke-width="1"/>
    <text x="50" y="127" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      3. "Xe cộ giao thông" - Similarity: 0.82
    </text>
  </g>
</svg>

